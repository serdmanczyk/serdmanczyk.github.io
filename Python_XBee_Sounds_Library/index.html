    <!DOCTYPE html>
<html lang="en-us">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta name="author" content="Steven J. Erdmanczyk Jr.">
		<meta name="description" content="Obligatory software soap box">
		<meta name="generator" content="Hugo 0.15" />
		<title>Notes and Chords using Python &middot; Erdmanczyk.io</title>
		<link rel="shortcut icon" href="http://serdmanczyk.github.io/images/favicon.ico">
		<link rel="stylesheet" href="http://serdmanczyk.github.io/css/style.css">
		<link rel="stylesheet" href="http://serdmanczyk.github.io/css/highlight.css">
		<link rel="stylesheet" href="http://serdmanczyk.github.io/css/monosocialiconsfont.css">
		
		<link href="http://serdmanczyk.github.io/index.xml" rel="alternate" type="application/rss+xml" title="Erdmanczyk.io" />
		
	</head>

    <body>
       <nav class="main-nav">
	
	
		<a href='http://serdmanczyk.github.io/'> <span class="arrow">‚Üê</span>Home</a>
	

	
		<a href='http://serdmanczyk.github.io/about'>About</a>
	

	
	<a class="cta" href="http://serdmanczyk.github.io/index.xml">Subscribe</a>
	
</nav>

        <section id="wrapper">
            <article class="post">
                <header>
                    <h1>Notes and Chords using Python</h1>
                    <h2 class="headline">June 11, 2015</h2>
                     
                        <div id="toc" class="well col-md-4 col-sm-6">
                            
                        </div>
                      
                </header>
                <section id="post-body">
                    <p>Life events: my wife and I will be closing on a house in a couple days.  Yay!</p>

<p>Things have moved quick since moving here to Seattle and I&rsquo;ve realized I haven&rsquo;t been as good about posting on this blog.  Just to get content on here, I figured I would share a recent small project I&rsquo;ve been working on.</p>

<p>In what time I can spare I&rsquo;ve working on an education course for a hackerspace / STEAM education group here in Seattle.  I wanted to model the course after my Masters Thesis work, so one idea was getting youth engaged with using wireless communications.  One tool I thought would aid in engaging youth would be if they could easily program Arduino/XBee boards to play music, even chords on a remote machine.  This also aids given the interrelation of sound and radio communications having wave properties.  The basic idea is that the kids would program Arduino (or similar) microcontrollers to send messages via XBee that are translated on a central computer into music notes.</p>

<p>I found plenty of existing examples of generating sine waves using numpy, and turning that data into notes with pyaudio.</p>

<p>These examples didn&rsquo;t suite my situation because they all used blocking calls to play audio.  You issue the command to play a note and can&rsquo;t issue another until the note was finished.  I wanted to stream audio, and update the stream if a new note was entered.  This required a bit more reading into the pyaudio API.  Since this was a bit of effort for me, I figured I would share for others.</p>

<p>This is just a starting framework that turns a computer keyboard into a music generating keyboard.  Currently it just assigns notes at random, or sequentially (see commented line 29).  Once a key is pressed, it continues to play the same note.  If all notes are assigned, random notes are given to new keys.</p>

<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #75715e">#!/usr/bin/python</span>
<span style="color: #75715e"># coding=utf-8</span>

<span style="color: #f92672">import</span> <span style="color: #f8f8f2">numpy</span>
<span style="color: #f92672">import</span> <span style="color: #f8f8f2">random</span>
<span style="color: #f92672">import</span> <span style="color: #f8f8f2">math</span>
<span style="color: #f92672">import</span> <span style="color: #f8f8f2">copy</span>
<span style="color: #f92672">import</span> <span style="color: #f8f8f2">pyaudio</span>
<span style="color: #f92672">from</span> <span style="color: #f8f8f2">Tkinter</span> <span style="color: #f92672">import</span> <span style="color: #f92672">*</span>

<span style="color: #66d9ef">class</span> <span style="color: #a6e22e">NoteGen</span><span style="color: #f8f8f2">(object):</span>
    <span style="color: #66d9ef">def</span> <span style="color: #a6e22e">__init__</span><span style="color: #f8f8f2">(self,</span> <span style="color: #f8f8f2">notes</span><span style="color: #f92672">=</span><span style="color: #f8f8f2">range(</span><span style="color: #ae81ff">30</span><span style="color: #f8f8f2">,</span><span style="color: #ae81ff">70</span><span style="color: #f8f8f2">)):</span>
        <span style="color: #f8f8f2">self</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">choices</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">list(map(self</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">_note,</span> <span style="color: #f8f8f2">notes))</span>
        <span style="color: #f8f8f2">self</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">possibilities</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">copy</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">copy(self</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">choices)</span>
        <span style="color: #f8f8f2">self</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">mapping</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">{}</span>

    <span style="color: #66d9ef">def</span> <span style="color: #a6e22e">__call__</span><span style="color: #f8f8f2">(self,</span> <span style="color: #f8f8f2">key,</span> <span style="color: #f8f8f2">duration</span><span style="color: #f92672">=</span><span style="color: #f8f8f2">float(</span><span style="color: #e6db74">&quot;inf&quot;</span><span style="color: #f8f8f2">),</span> <span style="color: #f8f8f2">amplitude</span><span style="color: #f92672">=</span><span style="color: #ae81ff">1</span><span style="color: #f8f8f2">):</span>
        <span style="color: #f8f8f2">note</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">self</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">_get(key,</span> <span style="color: #f8f8f2">duration,</span> <span style="color: #f8f8f2">amplitude)</span>
        <span style="color: #66d9ef">if</span> <span style="color: #f92672">not</span> <span style="color: #f8f8f2">note:</span>
            <span style="color: #f8f8f2">note</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">self</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">_map(key,</span> <span style="color: #f8f8f2">duration,</span> <span style="color: #f8f8f2">amplitude)</span>
        <span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">note</span>

    <span style="color: #66d9ef">def</span> <span style="color: #a6e22e">_map</span><span style="color: #f8f8f2">(self,</span> <span style="color: #f8f8f2">key,</span> <span style="color: #f8f8f2">duration,</span> <span style="color: #f8f8f2">amplitude):</span>
        <span style="color: #66d9ef">if</span> <span style="color: #f92672">not</span> <span style="color: #f8f8f2">self</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">possibilities:</span>
            <span style="color: #f8f8f2">self</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">mapping[key]</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">random</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">choice(self</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">choices)</span>
            <span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">Note(self</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">mapping[key],</span> <span style="color: #f8f8f2">duration,</span> <span style="color: #f8f8f2">amplitude)</span>

        <span style="color: #f8f8f2">n</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">self</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">possibilities[</span><span style="color: #ae81ff">0</span><span style="color: #f8f8f2">]</span>
        <span style="color: #75715e"># n = random.choice(self.possibilities)</span>
        <span style="color: #f8f8f2">self</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">possibilities</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">remove(n)</span>
        <span style="color: #f8f8f2">self</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">mapping[key]</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">n</span>
        <span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">Note(n,</span> <span style="color: #f8f8f2">duration,</span> <span style="color: #f8f8f2">amplitude)</span>

    <span style="color: #66d9ef">def</span> <span style="color: #a6e22e">_get</span><span style="color: #f8f8f2">(self,</span> <span style="color: #f8f8f2">key,</span> <span style="color: #f8f8f2">duration,</span> <span style="color: #f8f8f2">amplitude):</span>
        <span style="color: #66d9ef">if</span> <span style="color: #f8f8f2">key</span> <span style="color: #f92672">in</span> <span style="color: #f8f8f2">self</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">mapping:</span>
            <span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">Note(self</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">mapping[key],</span> <span style="color: #f8f8f2">duration,</span> <span style="color: #f8f8f2">amplitude)</span>

    <span style="color: #66d9ef">def</span> <span style="color: #a6e22e">_note</span><span style="color: #f8f8f2">(self,</span> <span style="color: #f8f8f2">n):</span>
        <span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">math</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">pow(</span><span style="color: #ae81ff">2</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">(float(n)</span><span style="color: #f92672">-</span><span style="color: #ae81ff">49</span><span style="color: #f8f8f2">)</span> <span style="color: #f92672">/</span> <span style="color: #ae81ff">12</span><span style="color: #f8f8f2">)</span> <span style="color: #f92672">*</span> <span style="color: #ae81ff">440</span>


<span style="color: #66d9ef">class</span> <span style="color: #a6e22e">Note</span><span style="color: #f8f8f2">(object):</span>
    <span style="color: #f8f8f2">names</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">[</span>
        <span style="color: #e6db74">&quot;A&quot;</span><span style="color: #f8f8f2">,</span>
        <span style="color: #e6db74">&quot;A#/Bf&quot;</span><span style="color: #f8f8f2">,</span>
        <span style="color: #e6db74">&quot;B&quot;</span><span style="color: #f8f8f2">,</span>
        <span style="color: #e6db74">&quot;C&quot;</span><span style="color: #f8f8f2">,</span>
        <span style="color: #e6db74">&quot;C#/Df&quot;</span><span style="color: #f8f8f2">,</span>
        <span style="color: #e6db74">&quot;D&quot;</span><span style="color: #f8f8f2">,</span>
        <span style="color: #e6db74">&quot;D#/Ef&quot;</span><span style="color: #f8f8f2">,</span>
        <span style="color: #e6db74">&quot;E&quot;</span><span style="color: #f8f8f2">,</span>
        <span style="color: #e6db74">&quot;F&quot;</span><span style="color: #f8f8f2">,</span>
        <span style="color: #e6db74">&quot;F#/Gf&quot;</span><span style="color: #f8f8f2">,</span>
        <span style="color: #e6db74">&quot;G&quot;</span><span style="color: #f8f8f2">,</span>
        <span style="color: #e6db74">&quot;G#/Af&quot;</span>
    <span style="color: #f8f8f2">]</span>

    <span style="color: #66d9ef">def</span> <span style="color: #a6e22e">__init__</span><span style="color: #f8f8f2">(self,</span> <span style="color: #f8f8f2">frequency</span><span style="color: #f92672">=</span><span style="color: #ae81ff">440</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">duration</span><span style="color: #f92672">=</span><span style="color: #f8f8f2">float(</span><span style="color: #e6db74">&quot;inf&quot;</span><span style="color: #f8f8f2">),</span> <span style="color: #f8f8f2">amplitude</span><span style="color: #f92672">=</span><span style="color: #ae81ff">1</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">rate</span><span style="color: #f92672">=</span><span style="color: #ae81ff">44100</span><span style="color: #f8f8f2">):</span>
        <span style="color: #f8f8f2">self</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">frequency</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">frequency</span>
        <span style="color: #f8f8f2">self</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">total_frames</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">duration</span> <span style="color: #f92672">*</span> <span style="color: #f8f8f2">rate</span>
        <span style="color: #f8f8f2">self</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">frame_offset</span> <span style="color: #f92672">=</span> <span style="color: #ae81ff">0</span>
        <span style="color: #f8f8f2">self</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">rate</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">rate</span>
        <span style="color: #f8f8f2">self</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">amplitude</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">amplitude</span>

    <span style="color: #66d9ef">def</span> <span style="color: #a6e22e">__call__</span><span style="color: #f8f8f2">(self,</span> <span style="color: #f8f8f2">frames):</span>
        <span style="color: #66d9ef">if</span> <span style="color: #f8f8f2">self</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">done:</span>
            <span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">numpy</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">zeros(frames,</span> <span style="color: #f8f8f2">float)</span>

        <span style="color: #f8f8f2">factor</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">float(self</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">frequency)</span> <span style="color: #f92672">*</span> <span style="color: #f8f8f2">((math</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">pi</span> <span style="color: #f92672">*</span> <span style="color: #ae81ff">2</span><span style="color: #f8f8f2">)</span> <span style="color: #f92672">/</span> <span style="color: #f8f8f2">self</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">rate)</span>
        
        <span style="color: #f8f8f2">length</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">(frames</span> <span style="color: #66d9ef">if</span> <span style="color: #f8f8f2">frames</span> <span style="color: #f92672">&lt;</span> <span style="color: #f8f8f2">self</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">remaining</span> <span style="color: #66d9ef">else</span> <span style="color: #f8f8f2">self</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">remaining)</span>
        <span style="color: #f8f8f2">sin</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">numpy</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">sin((numpy</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">arange(length)</span> <span style="color: #f92672">+</span> <span style="color: #f8f8f2">self</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">frame_offset)</span> <span style="color: #f92672">*</span> <span style="color: #f8f8f2">factor)</span> <span style="color: #f92672">*</span> <span style="color: #f8f8f2">self</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">amplitude</span>
        <span style="color: #66d9ef">if</span> <span style="color: #f8f8f2">frames</span> <span style="color: #f92672">&gt;</span> <span style="color: #f8f8f2">self</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">remaining:</span>
            <span style="color: #f8f8f2">sin</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">numpy</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">concatenate([sin,</span> <span style="color: #f8f8f2">numpy</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">zeros(frames</span> <span style="color: #f92672">-</span> <span style="color: #f8f8f2">self</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">remaining,</span> <span style="color: #f8f8f2">float)])</span>

        <span style="color: #f8f8f2">self</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">frame_offset</span> <span style="color: #f92672">+=</span> <span style="color: #f8f8f2">frames</span>
        <span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">sin</span>

    <span style="color: #66d9ef">def</span> <span style="color: #a6e22e">__lt__</span><span style="color: #f8f8f2">(self,</span> <span style="color: #f8f8f2">other):</span>
        <span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">self</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">frequency</span> <span style="color: #f92672">&lt;</span> <span style="color: #f8f8f2">other</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">frequency</span>

    <span style="color: #66d9ef">def</span> <span style="color: #a6e22e">__eq__</span><span style="color: #f8f8f2">(self,</span> <span style="color: #f8f8f2">other):</span>
        <span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">self</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">frequency</span> <span style="color: #f92672">==</span> <span style="color: #f8f8f2">other</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">frequency</span>
    
    <span style="color: #a6e22e">@property</span>
    <span style="color: #66d9ef">def</span> <span style="color: #a6e22e">remaining</span><span style="color: #f8f8f2">(self):</span>
        <span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">self</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">total_frames</span> <span style="color: #f92672">-</span> <span style="color: #f8f8f2">self</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">frame_offset</span>
    
    <span style="color: #a6e22e">@property</span>
    <span style="color: #66d9ef">def</span> <span style="color: #a6e22e">done</span><span style="color: #f8f8f2">(self):</span>
        <span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">self</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">frame_offset</span> <span style="color: #f92672">&gt;=</span> <span style="color: #f8f8f2">self</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">total_frames</span>

    <span style="color: #a6e22e">@property</span>
    <span style="color: #66d9ef">def</span> <span style="color: #a6e22e">name</span><span style="color: #f8f8f2">(self):</span>
        <span style="color: #f8f8f2">keynum</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">int((</span><span style="color: #ae81ff">12</span> <span style="color: #f92672">*</span> <span style="color: #f8f8f2">math</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">log((self</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">frequency</span> <span style="color: #f92672">/</span> <span style="color: #ae81ff">440</span><span style="color: #f8f8f2">),</span> <span style="color: #ae81ff">2</span><span style="color: #f8f8f2">))</span>  <span style="color: #f92672">+</span>  <span style="color: #ae81ff">48</span><span style="color: #f8f8f2">)</span> <span style="color: #f92672">%</span> <span style="color: #ae81ff">12</span>
        <span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">self</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">names[keynum]</span>

<span style="color: #66d9ef">class</span> <span style="color: #a6e22e">Chord</span><span style="color: #f8f8f2">(object):</span>
    <span style="color: #66d9ef">def</span> <span style="color: #a6e22e">__init__</span><span style="color: #f8f8f2">(self):</span>
        <span style="color: #f8f8f2">self</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">notes</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">[]</span>

    <span style="color: #66d9ef">def</span> <span style="color: #a6e22e">__call__</span><span style="color: #f8f8f2">(self,</span> <span style="color: #f8f8f2">duration):</span>
        <span style="color: #66d9ef">if</span> <span style="color: #f92672">not</span> <span style="color: #f8f8f2">len(self</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">notes):</span>
            <span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">numpy</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">zeros(duration,</span> <span style="color: #f8f8f2">float)</span>

        <span style="color: #f8f8f2">gen</span> <span style="color: #f92672">=</span> <span style="color: #66d9ef">lambda</span> <span style="color: #f8f8f2">note:note(duration)</span>
        <span style="color: #f8f8f2">output</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">sum(map(gen,</span> <span style="color: #f8f8f2">self</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">notes))</span>
        <span style="color: #f8f8f2">self</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">clean()</span>
        <span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">output</span>

    <span style="color: #66d9ef">def</span> <span style="color: #a6e22e">add_note</span><span style="color: #f8f8f2">(self,</span> <span style="color: #f8f8f2">note):</span>
        <span style="color: #66d9ef">if</span> <span style="color: #f92672">not</span> <span style="color: #f8f8f2">isinstance(note,</span> <span style="color: #f8f8f2">Note):</span>
            <span style="color: #66d9ef">raise</span> <span style="color: #a6e22e">ValueError</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&quot;Must be of type Note&quot;</span><span style="color: #f8f8f2">)</span>

        <span style="color: #f8f8f2">self</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">notes</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">append(note)</span>

    <span style="color: #66d9ef">def</span> <span style="color: #a6e22e">remove_note</span><span style="color: #f8f8f2">(self,</span> <span style="color: #f8f8f2">note):</span>
        <span style="color: #66d9ef">if</span> <span style="color: #f92672">not</span> <span style="color: #f8f8f2">isinstance(note,</span> <span style="color: #f8f8f2">Note):</span>
            <span style="color: #66d9ef">return</span>

        <span style="color: #66d9ef">if</span> <span style="color: #f8f8f2">note</span> <span style="color: #f92672">in</span> <span style="color: #f8f8f2">self</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">notes:</span>
            <span style="color: #f8f8f2">self</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">notes</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">remove(note)</span>

    <span style="color: #66d9ef">def</span> <span style="color: #a6e22e">clean</span><span style="color: #f8f8f2">(self):</span>
        <span style="color: #66d9ef">for</span> <span style="color: #f8f8f2">note</span> <span style="color: #f92672">in</span> <span style="color: #f8f8f2">self</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">notes:</span>
            <span style="color: #66d9ef">if</span> <span style="color: #f8f8f2">note</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">done:</span>
                <span style="color: #f8f8f2">self</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">notes</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">remove(note)</span>


<span style="color: #66d9ef">if</span> <span style="color: #f8f8f2">__name__</span> <span style="color: #f92672">==</span> <span style="color: #e6db74">&quot;__main__&quot;</span><span style="color: #f8f8f2">:</span>
    <span style="color: #f8f8f2">p</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">pyaudio</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">PyAudio()</span>
    <span style="color: #f8f8f2">chord</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">Chord()</span>
    <span style="color: #f8f8f2">gen</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">NoteGen()</span>

    <span style="color: #66d9ef">def</span> <span style="color: #a6e22e">callback</span><span style="color: #f8f8f2">(in_data,</span> <span style="color: #f8f8f2">frame_count,</span> <span style="color: #f8f8f2">time_info,</span> <span style="color: #f8f8f2">status):</span>
        <span style="color: #f8f8f2">wave</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">chord(frame_count)</span>
        <span style="color: #f8f8f2">data</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">wave</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">astype(numpy</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">float32)</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">tostring()</span>
        <span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">(data,</span> <span style="color: #f8f8f2">pyaudio</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">paContinue)</span>

    <span style="color: #f8f8f2">stream</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">p</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">open(</span>
        <span style="color: #f8f8f2">format</span><span style="color: #f92672">=</span><span style="color: #f8f8f2">pyaudio</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">paFloat32,</span>
        <span style="color: #f8f8f2">channels</span><span style="color: #f92672">=</span><span style="color: #ae81ff">1</span><span style="color: #f8f8f2">,</span>
        <span style="color: #f8f8f2">rate</span><span style="color: #f92672">=</span><span style="color: #ae81ff">44100</span><span style="color: #f8f8f2">,</span>
        <span style="color: #f8f8f2">output</span><span style="color: #f92672">=</span><span style="color: #f8f8f2">True,</span>
        <span style="color: #f8f8f2">stream_callback</span><span style="color: #f92672">=</span><span style="color: #f8f8f2">callback</span>
    <span style="color: #f8f8f2">)</span>

    <span style="color: #f8f8f2">stream</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">start_stream()</span>

    <span style="color: #66d9ef">def</span> <span style="color: #a6e22e">keydown</span><span style="color: #f8f8f2">(event):</span>
        <span style="color: #f8f8f2">k</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">gen(event</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">char,</span> <span style="color: #ae81ff">1</span><span style="color: #f8f8f2">)</span>
        <span style="color: #f8f8f2">chord</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">add_note(k)</span>
        <span style="color: #66d9ef">print</span> <span style="color: #f8f8f2">[(n</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">name,</span> <span style="color: #f8f8f2">n</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">frequency)</span> <span style="color: #66d9ef">for</span> <span style="color: #f8f8f2">n</span> <span style="color: #f92672">in</span> <span style="color: #f8f8f2">chord</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">notes]</span>

    <span style="color: #66d9ef">def</span> <span style="color: #a6e22e">keyup</span><span style="color: #f8f8f2">(event):</span>
        <span style="color: #66d9ef">pass</span>
        <span style="color: #75715e"># k = gen(event.char)</span>
        <span style="color: #75715e"># chord.remove_note(k)</span>
        <span style="color: #75715e"># print [n.name for n in chord.notes]</span>


    <span style="color: #f8f8f2">root</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">Tk()</span>
    <span style="color: #f8f8f2">frame</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">Frame(root,</span> <span style="color: #f8f8f2">width</span><span style="color: #f92672">=</span><span style="color: #ae81ff">100</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">height</span><span style="color: #f92672">=</span><span style="color: #ae81ff">100</span><span style="color: #f8f8f2">)</span>
    <span style="color: #f8f8f2">frame</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">bind_all(</span><span style="color: #e6db74">&quot;&lt;KeyPress&gt;&quot;</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">keydown)</span>
    <span style="color: #f8f8f2">frame</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">bind_all(</span><span style="color: #e6db74">&quot;&lt;KeyRelease&gt;&quot;</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">keyup)</span>
    <span style="color: #f8f8f2">frame</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">pack()</span>

    <span style="color: #f8f8f2">root</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">mainloop()</span>

    <span style="color: #f8f8f2">stream</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">stop_stream()</span>
    <span style="color: #f8f8f2">stream</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">close()</span>
    <span style="color: #f8f8f2">p</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">terminate()</span>
</pre></div>


<p>This is also available on Github as a <a href="https://gist.github.com/serdmanczyk/5a9389d80db94440cf15">gist</a>.</p>

                </section>
            </article>
            <footer id="post-meta" class="clearfix">
                
                        <img class="avatar" src="http://serdmanczyk.github.io/images/avatar.png">
                        <div>
                            <span class="dark">Steven J. Erdmanczyk Jr.</span>
                            <span>Software Developer</span>
                        </div>
                    
                <section id="sharing">
                    <a class="twitter" href="https://twitter.com/intent/tweet?text=http%3a%2f%2fserdmanczyk.github.io%2fPython_XBee_Sounds_Library%2f - Notes%20and%20Chords%20using%20Python "><span class="icon-twitter"> Tweet</span></a>

<a class="facebook" href="#" onclick="
    window.open(
      'https://www.facebook.com/sharer/sharer.php?u='+encodeURIComponent(location.href),
      'facebook-share-dialog',
      'width=626,height=436');
    return false;"><span class="icon-facebook-rect"> Share</span>
</a>

                </section>
            </footer>

            <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'serdmanczyk';
    var disqus_identifier = 'http:\/\/serdmanczyk.github.io\/Python_XBee_Sounds_Library\/';
    var disqus_title = 'Notes and Chords using Python';
    var disqus_url = 'http:\/\/serdmanczyk.github.io\/Python_XBee_Sounds_Library\/';

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

            <ul id="post-list" class="archive readmore">
    <h3>Read more</h3>
    
    
        
        <li>
            <a href="http://serdmanczyk.github.io/post/2016-03-11-PythonOberserverMetaclass/">Python Oberserver Metaclass<aside class="dates">Mar 10</aside></a>
        </li>
        
   
    
        
        <li>
            <a href="http://serdmanczyk.github.io/Python_XBee_Sounds_Library/">Notes and Chords using Python<aside class="dates">Jun 11</aside></a>
        </li>
        
   
    
        
        <li>
            <a href="http://serdmanczyk.github.io/gardenspark/gardenspark-part-three-making-it-pretty/">GardenSpark: Part Three - Make the Internet Pretty<aside class="dates">Apr 5</aside></a>
        </li>
        
   
    
        
        <li>
            <a href="http://serdmanczyk.github.io/post/2015-02-12-moving-to-seattle-hows-the-weather/">Moving to Seattle, How&#39;s the Weather? (graphs!)<aside class="dates">Feb 25</aside></a>
        </li>
        
   
    
        
        <li>
            <a href="http://serdmanczyk.github.io/gardenspark/gardenspark-part-two-putting-it-in-the-cloud/">GardenSpark: Part Two - Putting It in the Cloud<aside class="dates">Sep 11</aside></a>
        </li>
        
   
    
        
   
    
        
        <li>
            <a href="http://serdmanczyk.github.io/gardenspark/GardenSpark-Prototyping/">GardenSpark: Part One - Prototype / stream to plotly<aside class="dates">Jul 22</aside></a>
        </li>
        
   
    
        
        <li>
            <a href="http://serdmanczyk.github.io/ClassAtttendanceApp/">Online Class Attendance App using Flask/MongoDB<aside class="dates">Jun 18</aside></a>
        </li>
        
   
    
        
        <li>
            <a href="http://serdmanczyk.github.io/XBeeAPI-PythonArduino-Tutorial/">XBee API Mode Tutorial Using Python and Arduino<aside class="dates">Jun 1</aside></a>
        </li>
        
   
    
        
        <li>
            <a href="http://serdmanczyk.github.io/BlogStarts/">Developer Blog Begins<aside class="dates">May 29</aside></a>
        </li>
        
   
</ul>
            <footer id="footer">
    
        
<div id="social">
    
    <a class="symbol" href="https://www.github.com/serdmanczyk">
        circlegithub
    </a>
    
    <a class="symbol" href="https://plus.google.com/u/0/&#43;StevenErdmanczykJr/posts">
        circlegoogleplus
    </a>
    
    <a class="symbol" href="https://www.linkedin.com/in/sjerdmanczykjr">
        circlelinkedin
    </a>
    
    <a class="symbol" href="http://stackoverflow.com/users/2406040/serdmanczyk">
        circlestackoverflow
    </a>
    
</div>

    
    <p class="small">
    
        ¬© Copyright 2016 Steven J. Erdmanczyk Jr.
    
    </p>
</footer>

        </section>

        <script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="http://serdmanczyk.github.io/js/main.js"></script>
<script src="http://serdmanczyk.github.io/js/highlight.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-51048910-1', 'auto');
ga('send', 'pageview');
</script>


    </body>
</html>
